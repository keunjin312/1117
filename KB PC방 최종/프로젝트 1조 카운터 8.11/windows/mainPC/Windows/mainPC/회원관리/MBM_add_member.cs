using PC.Manager;
using System;
using System.Data;
using System.Windows.Forms;

namespace mainPC.Windows.mainPC.회원관리 {
    public partial class MBM_add_member : Form {
        public MBM_add_member() {
        InitializeComponent();
        }

        //아이디 중복검사
        private void btn_addmb_id_doubleck_Click(object sender, EventArgs e) {
        string _admb_id = tbox_addmb_id.Text;
        DataRow _row = App.Self().DBManager.ReadMember_byid(_admb_id);
            if (_row != null) {
            MessageBox.Show(String.Format("{0}은 사용중인 아이디입니다.", _admb_id));
            tbox_addmb_id.Focus(); tbox_addmb_id.SelectAll();
            return;  }
       
            else { MessageBox.Show(String.Format("사용가능한 아이디입니다.", _admb_id));
            btn_addmb_save.Enabled = true;
            }
        }

        //회원추가 DB저장
        private void btn_addmb_save_Click(object sender, EventArgs e) {
            string _addmb_pw = tbox_addmb_pw.Text; 
            string _addmb_name = tbox_addmb_name.Text;
            string _addmb_id = tbox_addmb_id.Text;
            string _addmb_ph = tbox_addmb_ph.Text;
            DateTime _addmb_birthdate = date_addmb_birthdate.Value;
            DateTime _addmb_newdate = date_addmb_newdate.Value = DateTime.Now;
            int _result = App.Self().DBManager.Addmember(_addmb_name,
                _addmb_id, _addmb_pw, _addmb_ph, _addmb_birthdate, _addmb_newdate);
            if (_result > 0) {
                MessageBox.Show("회원 추가성공");
                this.DialogResult = DialogResult.Cancel;                    
            }
            else {
                MessageBox.Show("추가실패");
            }
        }
    }
}






































































































































































































































































































































































































































































































































































































//바보 ㅎ